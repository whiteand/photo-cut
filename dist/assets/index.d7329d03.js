const Pe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};Pe();const R={};function $e(e){R.context=e}const Ne=(e,t)=>e===t,se={equals:Ne};let Ee=Ae;const q={},F=1,re=2,be={owned:null,cleanups:null,context:null,owner:null};var x=null;let K=null,w=null,z=null,E=null,A=null,fe=0;function De(e,t){const n=w,o=x,i=e.length===0,s=i?be:{owned:null,cleanups:null,context:null,owner:t||o},c=i?e:()=>e(()=>pe(s));x=s,w=null;try{return me(c,!0)}finally{w=n,x=o}}function b(e,t){t=t?Object.assign({},se,t):se;const n={value:e,observers:null,observerSlots:null,pending:q,comparator:t.equals||void 0},o=i=>(typeof i=="function"&&(i=i(n.pending!==q?n.pending:n.value)),he(n,i));return[Se.bind(n),o]}function L(e,t,n){const o=ge(e,t,!1,F);Q(o)}function D(e,t,n){Ee=Me;const o=ge(e,t,!1,F);o.user=!0,A?A.push(o):Q(o)}function j(e,t,n){n=n?Object.assign({},se,n):se;const o=ge(e,t,!0,0);return o.pending=q,o.observers=null,o.observerSlots=null,o.comparator=n.equals||void 0,Q(o),Se.bind(o)}function Ie(e){if(z)return e();let t;const n=z=[];try{t=e()}finally{z=null}return me(()=>{for(let o=0;o<n.length;o+=1){const i=n[o];if(i.pending!==q){const s=i.pending;i.pending=q,he(i,s)}}},!1),t}function de(e){let t,n=w;return w=null,t=e(),w=n,t}function X(e){return x===null||(x.cleanups===null?x.cleanups=[e]:x.cleanups.push(e)),e}function Se(){const e=K;if(this.sources&&(this.state||e)){const t=E;E=null,this.state===F||e?Q(this):le(this),E=t}if(w){const t=this.observers?this.observers.length:0;w.sources?(w.sources.push(this),w.sourceSlots.push(t)):(w.sources=[this],w.sourceSlots=[t]),this.observers?(this.observers.push(w),this.observerSlots.push(w.sources.length-1)):(this.observers=[w],this.observerSlots=[w.sources.length-1])}return this.value}function he(e,t,n){if(z)return e.pending===q&&z.push(e),e.pending=t,t;if(e.comparator&&e.comparator(e.value,t))return t;let o=!1;return e.value=t,e.observers&&e.observers.length&&me(()=>{for(let i=0;i<e.observers.length;i+=1){const s=e.observers[i];o&&K.disposed.has(s),(o&&!s.tState||!o&&!s.state)&&(s.pure?E.push(s):A.push(s),s.observers&&Ce(s)),o||(s.state=F)}if(E.length>1e6)throw E=[],new Error},!1),t}function Q(e){if(!e.fn)return;pe(e);const t=x,n=w,o=fe;w=x=e,Ue(e,e.value,o),w=n,x=t}function Ue(e,t,n){let o;try{o=e.fn(t)}catch(i){Re(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?he(e,o):e.value=o,e.updatedAt=n)}function ge(e,t,n,o=F,i){const s={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:x,context:null,pure:n};return x===null||x!==be&&(x.owned?x.owned.push(s):x.owned=[s]),s}function k(e){const t=K;if(e.state===0||t)return;if(e.state===re||t)return le(e);if(e.suspense&&de(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<fe);)(e.state||t)&&n.push(e);for(let o=n.length-1;o>=0;o--)if(e=n[o],e.state===F||t)Q(e);else if(e.state===re||t){const i=E;E=null,le(e,n[0]),E=i}}function me(e,t){if(E)return e();let n=!1;t||(E=[]),A?n=!0:A=[],fe++;try{const o=e();return Be(n),o}catch(o){E||(A=null),Re(o)}}function Be(e){E&&(Ae(E),E=null),!e&&(A.length?Ie(()=>{Ee(A),A=null}):A=null)}function Ae(e){for(let t=0;t<e.length;t++)k(e[t])}function Me(e){let t,n=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[n++]=i:k(i)}R.context&&$e();const o=e.length;for(t=0;t<n;t++)k(e[t]);for(t=o;t<e.length;t++)k(e[t])}function le(e,t){const n=K;e.state=0;for(let o=0;o<e.sources.length;o+=1){const i=e.sources[o];i.sources&&(i.state===F||n?i!==t&&k(i):(i.state===re||n)&&le(i,t))}}function Ce(e){const t=K;for(let n=0;n<e.observers.length;n+=1){const o=e.observers[n];(!o.state||t)&&(o.state=re,o.pure?E.push(o):A.push(o),o.observers&&Ce(o))}}function pe(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),o=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const s=i.pop(),c=n.observerSlots.pop();o<i.length&&(s.sourceSlots[c]=o,i[o]=s,n.observerSlots[o]=c)}}if(e.owned){for(t=0;t<e.owned.length;t++)pe(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Re(e){throw e}function Y(e,t){return de(()=>e(t||{}))}function Oe(e){let t=!1;const n=j(()=>e.when,void 0,{equals:(o,i)=>t?o===i:!o==!i});return j(()=>{const o=n();if(o){const i=e.children;return(t=typeof i=="function"&&i.length>0)?de(()=>i(o)):i}return e.fallback})}function Fe(e,t,n){let o=n.length,i=t.length,s=o,c=0,r=0,f=t[i-1].nextSibling,d=null;for(;c<i||r<s;){if(t[c]===n[r]){c++,r++;continue}for(;t[i-1]===n[s-1];)i--,s--;if(i===c){const g=s<o?r?n[r-1].nextSibling:n[s-r]:f;for(;r<s;)e.insertBefore(n[r++],g)}else if(s===r)for(;c<i;)(!d||!d.has(t[c]))&&t[c].remove(),c++;else if(t[c]===n[s-1]&&n[r]===t[i-1]){const g=t[--i].nextSibling;e.insertBefore(n[r++],t[c++].nextSibling),e.insertBefore(n[--s],g),t[i]=n[s]}else{if(!d){d=new Map;let y=r;for(;y<s;)d.set(n[y],y++)}const g=d.get(t[c]);if(g!=null)if(r<g&&g<s){let y=c,l=1,S;for(;++y<i&&y<s&&!((S=d.get(t[y]))==null||S!==g+l);)l++;if(l>g-r){const C=t[c];for(;r<g;)e.insertBefore(n[r++],C)}else e.replaceChild(n[r++],t[c++])}else c++;else t[c++].remove()}}}const _e="_$DX_DELEGATE";function He(e,t,n){let o;return De(i=>{o=i,t===document?e():G(t,e(),t.firstChild?null:void 0,n)}),()=>{o(),t.textContent=""}}function H(e,t,n){const o=document.createElement("template");o.innerHTML=e;let i=o.content.firstChild;return n&&(i=i.firstChild),i}function Le(e,t=window.document){const n=t[_e]||(t[_e]=new Set);for(let o=0,i=e.length;o<i;o++){const s=e[o];n.has(s)||(n.add(s),t.addEventListener(s,We))}}function V(e,t){t==null?e.removeAttribute("class"):e.className=t}function G(e,t,n,o){if(n!==void 0&&!o&&(o=[]),typeof t!="function")return ce(e,t,o,n);L(i=>ce(e,t(),i,n),o)}function We(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),R.registry&&!R.done&&(R.done=!0,document.querySelectorAll("[id^=pl-]").forEach(o=>o.remove()));n!==null;){const o=n[t];if(o&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?o.call(n,i,e):o.call(n,e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function ce(e,t,n,o,i){for(R.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,c=o!==void 0;if(e=c&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(R.context)return n;if(s==="number"&&(t=t.toString()),c){let r=n[0];r&&r.nodeType===3?r.data=t:r=document.createTextNode(t),n=W(e,n,o,r)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean"){if(R.context)return n;n=W(e,n,o)}else{if(s==="function")return L(()=>{let r=t();for(;typeof r=="function";)r=r();n=ce(e,r,n,o)}),()=>n;if(Array.isArray(t)){const r=[],f=n&&Array.isArray(n);if(ae(r,t,n,i))return L(()=>n=ce(e,r,n,o,!0)),()=>n;if(R.context){for(let d=0;d<r.length;d++)if(r[d].parentNode)return n=r}if(r.length===0){if(n=W(e,n,o),c)return n}else f?n.length===0?ye(e,r,o):Fe(e,n,r):(n&&W(e),ye(e,r));n=r}else if(t instanceof Node){if(R.context&&t.parentNode)return n=c?[t]:t;if(Array.isArray(n)){if(c)return n=W(e,n,o,t);W(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function ae(e,t,n,o){let i=!1;for(let s=0,c=t.length;s<c;s++){let r=t[s],f=n&&n[s];if(r instanceof Node)e.push(r);else if(!(r==null||r===!0||r===!1))if(Array.isArray(r))i=ae(e,r,f)||i;else if(typeof r=="function")if(o){for(;typeof r=="function";)r=r();i=ae(e,Array.isArray(r)?r:[r],f)||i}else e.push(r),i=!0;else{const d=String(r);f&&f.nodeType===3&&f.data===d?e.push(f):e.push(document.createTextNode(d))}}return i}function ye(e,t,n){for(let o=0,i=t.length;o<i;o++)e.insertBefore(t[o],n)}function W(e,t,n,o){if(n===void 0)return e.textContent="";const i=o||document.createTextNode("");if(t.length){let s=!1;for(let c=t.length-1;c>=0;c--){const r=t[c];if(i!==r){const f=r.parentNode===e;!s&&!c?f?e.replaceChild(i,r):e.insertBefore(i,n):f&&r.remove()}else s=!0}}else e.insertBefore(i,n);return[i]}const Xe="_App_isqig_1",Ge="_header_isqig_5",Ve="_uploadWrapper_isqig_14",qe="_pair_isqig_21",ue={App:Xe,header:Ge,uploadWrapper:Ve,pair:qe};function we(e,t,n){const o=e.createShader(t);return o?(e.shaderSource(o,n),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)?o:(console.log(e.getShaderInfoLog(o)),e.deleteShader(o),null)):null}function je(e,t,n){const o=e.createProgram();return o?(e.attachShader(o,t),e.attachShader(o,n),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)?o:(console.log(e.getProgramInfoLog(o)),e.deleteProgram(o),e.deleteShader(t),e.deleteShader(n),null)):null}function Ye(e,t,n,o,i){const s=t,c=t+o,r=n,f=n+i;e.bufferData(e.ARRAY_BUFFER,new Float32Array([s,r,c,r,s,f,s,f,c,f,c,r]),e.STATIC_DRAW)}const ze=H("<canvas></canvas>"),ke=`
#version 300 es
 
// an attribute is an input (in) to a vertex shader.
// It will receive data from a buffer
in vec2 a_position;
out vec2 u_uv;

uniform vec2 u_resolution;
 
// all shaders have a main function
void main() {
  vec2 zeroToOne = a_position / u_resolution;
  vec2 mopo = zeroToOne * 2.0;
  vec2 clip = mopo - 1.0;
  gl_Position = vec4(clip.x, -clip.y, 0, 1);
  u_uv = zeroToOne;
}

`.trim(),Ke=`
#version 300 es
 
precision highp float;

in vec2 u_uv;
uniform vec2 u_resolution;
uniform vec2 u_src_resolution;
uniform sampler2D u_src;
uniform vec2 u_a;
uniform vec2 u_b;
uniform vec2 u_c;
uniform vec2 u_d;

out vec4 outColor;
 
void main() {
  vec2 ab = u_a + (u_b - u_a) * u_uv.x;
  vec2 dc = u_d + (u_c - u_d) * u_uv.x;
  vec2 p = ab + (dc - ab) * u_uv.y;
  vec2 texCoord = p / u_src_resolution;
  outColor = texture(u_src, texCoord);
}
`.trim();function Qe(e){let t;const[n,o]=b(!1);return D(()=>{if(n()||!e.source)return;const c=setTimeout(()=>{o(!0)},500);X(()=>clearTimeout(c))}),D(()=>{o(!1)}),D(()=>{if(!n())return;const{source:s}=e;if(!s)return;const{width:c,height:r,a:f,b:d,c:g,d:y}=e;t.width=c,t.height=r;const l=t.getContext("webgl2");if(!l)return;console.log(c,r);const S=we(l,l.VERTEX_SHADER,ke),C=we(l,l.FRAGMENT_SHADER,Ke);if(!S||!C)return;const v=je(l,S,C);if(!v)return;X(()=>{l.deleteProgram(v),l.deleteShader(C),l.deleteShader(S)});const u=l.createVertexArray();if(!u)return;X(()=>{l.deleteVertexArray(u)}),l.bindVertexArray(u);const h=Ze(l,v,c,r),a=l.getUniformLocation(v,"u_resolution"),m=l.getUniformLocation(v,"u_src_resolution"),p=l.getUniformLocation(v,"u_src"),T=l.createTexture();if(!T)return;X(()=>l.deleteTexture(T)),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,T),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST);var P=0,$=l.RGBA,I=l.RGBA,_=l.UNSIGNED_BYTE;l.texImage2D(l.TEXTURE_2D,P,$,I,_,s);const B=l.getUniformLocation(v,"u_a"),M=l.getUniformLocation(v,"u_b"),O=l.getUniformLocation(v,"u_c"),N=l.getUniformLocation(v,"u_d");l.clear(l.COLOR_BUFFER_BIT),l.useProgram(v),l.uniform2f(a,c,r),l.uniform2f(m,s.width,s.height),l.uniform2f(B,f.x,f.y),l.uniform2f(M,d.x,d.y),l.uniform2f(O,g.x,g.y),l.uniform2f(N,y.x,y.y),l.uniform1i(p,0),l.drawArrays(l.TRIANGLES,0,h)}),(()=>{const i=ze.cloneNode(!0),s=t;return typeof s=="function"?s(i):t=i,i})()}function Ze(e,t,n,o){const i=e.getAttribLocation(t,"a_position"),s=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,s),Ye(e,0,0,n,o),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),6}function ne(e,t,n){e.save(),e.fillStyle=n,e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let o=1;o<t.length;o++)e.lineTo(t[o].x,t[o].y);e.closePath(),e.fill(),e.restore()}const Je="_wrapper_1f4sj_1",et={wrapper:Je},tt=H("<div><canvas></canvas><canvas></canvas></div>");function oe(e,t,n,o){e.save(),e.fillStyle=o,e.beginPath(),e.arc(t.x,t.y,n,0,2*Math.PI),e.fill(),e.restore()}function ie(e,t){return Math.hypot(e.x-t.x,e.y-t.y)}function nt(e){let t,n,o;const i=j(()=>e.image?.width||0),s=j(()=>e.image?.height||0),[c,r]=b({x:window.innerWidth,y:window.innerHeight});D(()=>{const u=()=>{r({x:window.innerWidth,y:window.innerHeight})};window.addEventListener("resize",u),X(()=>{window.removeEventListener("resize",u)})}),D(()=>{const u=e.image;if(c(),!u)return;t.width=u.width,t.height=u.height,n.width=u.width,n.height=u.height;const h=t.getBoundingClientRect();o.style.height=h.height+"px",o.style.width=h.width+"px";const a=t.getContext("2d");a.clearRect(0,0,t.width,t.height),a.putImageData(u,0,0),e.onAChange({x:u.width/4,y:u.height/4}),e.onBChange({x:u.width*3/4,y:u.height/4}),e.onCChange({x:u.width*3/4,y:u.height*3/4}),e.onDChange({x:u.width/4,y:u.height*3/4})}),D(()=>{if(!n)return;const u=i(),h=s(),a=n.getBoundingClientRect(),m=Math.max(a.width,a.height)/Math.max(u,h),{a:p,b:T,c:P,d:$}=e,I=y(),_=n.getContext("2d");if(!_)return;const B={x:0,y:0},M={x:u,y:0},O={x:u,y:h},N={x:0,y:h};_.clearRect(0,0,u,h);const Z="rgba(0,0,0,0.3)";ne(_,[B,M,T,p],Z),ne(_,[M,O,P,T],Z),ne(_,[O,N,$,P],Z),ne(_,[N,B,p,$],Z);const J="rgba(255, 0, 0, 0.3)",ee="rgba(0, 0, 255, 0.3)",te=5/m;oe(_,p,te,I==="a"?ee:J),oe(_,T,te,I==="b"?ee:J),oe(_,P,te,I==="c"?ee:J),oe(_,$,te,I==="d"?ee:J),_.font=`${Math.round(12/m)}px Arial`,_.fillStyle="black";const U=Math.floor(20/m);_.fillText("A",p.x-U,p.y-U),_.fillText("B",T.x+U,T.y-U),_.fillText("C",P.x+U,P.y+U),_.fillText("D",$.x-U,$.y+U)});const f=u=>{const h=i(),a=s(),m=t.getBoundingClientRect(),p=Math.floor((u.x-m.left)/m.width*h),T=Math.floor((u.y-m.top)/m.height*a);return{x:p,y:T}};b(null);const[d,g]=b(null),[y,l]=b(null),S=u=>{const{clientX:h,clientY:a}=u,p=f({x:h,y:a}),{a:T,b:P,c:$,d:I}=e,_=ie(p,T),B=ie(p,P),M=ie(p,$),O=ie(p,I),N=Math.min(_,B,M,O);N===_&&l("a"),N===B&&l("b"),N===M&&l("c"),N===O&&l("d"),g(p)},C=u=>{if(y()==null)return;const a={x:u.clientX,y:u.clientY},m=f(a);g(m)};D(()=>{const u=y();if(u==null)return;const h=d();h!=null&&(u==="a"&&e.onAChange(h),u==="b"&&e.onBChange(h),u==="c"&&e.onCChange(h),u==="d"&&e.onDChange(h))});const v=()=>{l(null)};return(()=>{const u=tt.cloneNode(!0),h=u.firstChild,a=h.nextSibling,m=o;typeof m=="function"?m(u):o=u;const p=t;typeof p=="function"?p(h):t=h,a.$$mouseup=v,a.$$mousemove=C,a.$$mousedown=S;const T=n;return typeof T=="function"?T(a):n=a,L(()=>V(u,et.wrapper)),u})()}Le(["mousedown","mousemove","mouseup"]);const ot="_fileInput_dc5w6_1",ve={fileInput:ot},it=H('<input type="file">'),st=H('<div><button type="button"></button></div>');function rt(e){let t;const[n,o]=b(null);return D(()=>{const i=n();if(!i)return;const s=new FileReader;let c=!1;s.onload=r=>{if(c)return;const f=r.target.result,d=new Image;d.onload=()=>{if(c)return;const g=document.createElement("canvas");g.width=d.width,g.height=d.height;const y=g.getContext("2d");y.drawImage(d,0,0);const l=y.getImageData(0,0,g.width,g.height);e.onImageLoaded({image:l,name:i.name})},d.src=f},s.readAsDataURL(i),X(()=>{c=!0})}),[(()=>{const i=it.cloneNode(!0);i.addEventListener("change",c=>{const{files:r}=c.currentTarget;r&&r.length>0&&o(r[0])});const s=t;return typeof s=="function"?s(i):t=i,L(()=>V(i,ve.fileInput)),i})(),(()=>{const i=st.cloneNode(!0),s=i.firstChild;return i.$$click=()=>{t&&t.click()},G(s,()=>e.children),L(()=>V(i,ve.button)),i})()]}Le(["click"]);const Te=H('<input type="number">'),lt=H("<div></div>"),ct=H("<div><header>Welcome to Photo Cutter!</header></div>"),xe=512,ut=()=>{const[e,t]=b({x:0,y:0}),[n,o]=b({x:0,y:0}),[i,s]=b({x:0,y:0}),[c,r]=b({x:0,y:0}),[f,d]=b(null),g=j(()=>f()?.image||null),y=j(()=>f()?.name||null),[l,S]=b(400),[C,v]=b(300);return D(()=>{!f()||(S(xe),v(xe))}),(()=>{const u=ct.cloneNode(!0),h=u.firstChild;return G(u,Y(rt,{onImageLoaded:d,children:"Upload"}),null),G(u,Y(Oe,{get when(){return f()!==null},get children(){return[(()=>{const a=Te.cloneNode(!0);return a.addEventListener("change",m=>S(Number(m.currentTarget.value))),L(()=>a.value=l()),a})(),(()=>{const a=Te.cloneNode(!0);return a.addEventListener("change",m=>v(Number(m.currentTarget.value))),L(()=>a.value=C()),a})(),(()=>{const a=lt.cloneNode(!0);return G(a,Y(nt,{get image(){return g()},get a(){return e()},get b(){return n()},get c(){return i()},get d(){return c()},onAChange:t,onBChange:o,onCChange:s,onDChange:r}),null),G(a,Y(Qe,{get source(){return g()},get sourceName(){return y()},get width(){return l()},get height(){return C()},get a(){return e()},get b(){return n()},get c(){return i()},get d(){return c()}}),null),L(()=>V(a,ue.pair)),a})()]}}),null),L(a=>{const m=ue.App,p=ue.header;return m!==a._v$&&V(u,a._v$=m),p!==a._v$2&&V(h,a._v$2=p),a},{_v$:void 0,_v$2:void 0}),u})()};He(()=>Y(ut,{}),document.getElementById("root"));
